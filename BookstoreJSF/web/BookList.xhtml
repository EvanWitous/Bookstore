<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" >
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Bookstore</title>
</h:head>
<h:body>
    <h:graphicImage value="logo.png" style="margin:30px"/>
    <f:view>
        <h:form>
            <p:dataTable id="booktable" var="item" value="#{books.cache}" sortBy="#{item.id}" editable="true">
                <p:ajax event="rowEdit" listener="#{books.onEdit}" update="booktable"/>
                <p:column headerText="Code" sortBy="#{item.id}" style="width:17%">
                    #{item.id}
                </p:column>
                <p:column headerText="Title" sortBy="#{item.title}" style="width:17%">
                    <p:cellEditor>
                        <f:facet name="output">
                            #{item.title}
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{item.title}" style="width:92%; margin:2%"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Description" sortBy="#{item.description}" style="width:17%">
                    <p:cellEditor>
                        <f:facet name="output">
                            #{item.description}
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{item.description}" style="width:92%; margin:2%"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Author" sortBy="#{item.author}" style="width:17%">
                    <p:cellEditor>
                        <f:facet name="output">
                            #{item.author}
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{item.author}" style="width:92%; margin:2%"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column headerText="Price" sortBy="#{item.price}" style="width:17%">
                    <p:cellEditor>
                        <f:facet name="output">
                            #{item.price}
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{item.price}" style="width:92%; margin:2%"/>
                        </f:facet>
                    </p:cellEditor>
                </p:column>
                <p:column style="width:5%">
                    <p:rowEditor style="height:20px"/>
                </p:column>
                <p:column style="width:5%">
                    <p:commandButton icon="ui-icon-trash"
                                     style="background-color:transparent;border-style:none;width:50%; margin-left:10%"
                                     update="booktable" actionListener="#{books.delete(item)}"/>
                </p:column>
            </p:dataTable>
            <h:panelGroup id="input" style="width:100%">
                <p:inputText value="#{books.addition.id}" style="width:15%;margin:1%"/>
                <p:inputText value="#{books.addition.title}" style="width:15%;margin:1%"/>
                <p:inputText value="#{books.addition.description}" style="width:15%;margin:1%"/>
                <p:inputText value="#{books.addition.author}" style="width:15%;margin:1%"/>
                <p:inputText value="#{books.addition.price}" style="width:15%;margin:1%"/>
                <h:panelGroup style="width:8%;margin:1%">
                    <p:commandButton icon="ui-icon-disk"
                                     style="background-color:transparent;border-style:none"
                                     update="booktable" actionListener="#{books.add}"/>
                    <p:commandButton icon="ui-icon-refresh"
                                     style="background-color:transparent;border-style:none"
                                     update="input" actionListener="#{books.reset}"/>
                </h:panelGroup>
            </h:panelGroup>
        </h:form>

    </f:view>
</h:body>
</html>